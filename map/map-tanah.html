<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Peta Dunia Halus Besar</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: #1b3a24;
  }
  canvas {
    display: block;
    background: linear-gradient(180deg, #2f5a33, #1b3a24);
    cursor: grab;
  }
</style>
</head>
<body>
<canvas id="map"></canvas>

<script>
const canvas = document.getElementById("map");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// === PARAMETER UTAMA ===
const mapSize = 12000; // ukuran dunia besar (piksel)
let camX = mapSize / 2 - window.innerWidth / 2;
let camY = mapSize / 2 - window.innerHeight / 2;
let scale = 1;

// === BUAT TEKSTUR TANAH HALUS ===
const img = ctx.createImageData(mapSize, mapSize);
for (let i = 0; i < img.data.length; i += 4) {
  // variasi hijau lembut alami
  const base = 80 + Math.random() * 12; 
  img.data[i] = base * 0.5;    // R
  img.data[i+1] = base;        // G
  img.data[i+2] = base * 0.5;  // B
  img.data[i+3] = 255;         // A
}

// === SIMPAN TEKSTUR DI OFFSCREEN CANVAS ===
const offCanvas = document.createElement("canvas");
offCanvas.width = mapSize;
offCanvas.height = mapSize;
const offCtx = offCanvas.getContext("2d");
offCtx.imageSmoothingEnabled = true;
offCtx.putImageData(img, 0, 0);

// === FUNGSI GAMBAR ===
function draw() {
  ctx.setTransform(scale, 0, 0, scale, -camX * scale, -camY * scale);
  ctx.imageSmoothingEnabled = true;
  ctx.drawImage(offCanvas, 0, 0);
}
draw();

// === DRAG UNTUK GESER PETA ===
let dragging = false, lastX, lastY;
canvas.addEventListener("mousedown", e => {
  dragging = true;
  lastX = e.clientX;
  lastY = e.clientY;
  canvas.style.cursor = "grabbing";
});
window.addEventListener("mouseup", () => {
  dragging = false;
  canvas.style.cursor = "grab";
});
window.addEventListener("mousemove", e => {
  if (dragging) {
    camX -= (e.clientX - lastX) / scale;
    camY -= (e.clientY - lastY) / scale;
    lastX = e.clientX;
    lastY = e.clientY;
    draw();
  }
});

// === ZOOM DENGAN SCROLL ===
window.addEventListener("wheel", e => {
  e.preventDefault();
  const zoomIntensity = 0.1;
  const oldScale = scale;
  if (e.deltaY < 0) scale *= (1 + zoomIntensity);
  else scale *= (1 - zoomIntensity);
  scale = Math.max(0.2, Math.min(scale, 6)); // batas zoom
  draw();
});

// === SESUAIKAN DENGAN LAYAR ===
window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  draw();
});
</script>
</body>
</html>
